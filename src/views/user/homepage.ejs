<link rel="stylesheet" href="card-assets/css/bootstrap.min.css">
<link rel="stylesheet" href="card-assets/css/plugins/owl-carousel/owl.carousel.css">
<link rel="stylesheet" href="card-assets/css/plugins/magnific-popup/magnific-popup.css">
<%- include('partials/header.ejs') %>
    

<style>

.offer-badge {
    background-color: red;
    color: white;
    padding: 5px 10px;
    font-size: 12px;
    font-weight: bold;
    border-radius: 5px;
    position: absolute;
    top: 10px;
    left: 10px;
}
.original-price {
    text-decoration: line-through;
    color: gray;
}
.discounted-price {
    color: green;
    font-weight: bold;
}

</style>
<main>

      <!-- <h1>cakes by flavours</h1> -->
      <h2>order your cake online</h2>
      <div class="cake-list">
        <div class="sml-cnt">
          <img src="img/cakeMain.png" alt="" />
        </div>
        <div class="sml-cnt1">
          <img src="img/cakeMain.png" alt="" />
        </div>
        <div class="sml-cnt2">
          <img src="img/cakeMain.png" alt="" />
        </div>
        <div class="sml-cnt3">
          <img src="img/cakeMain.png" alt="" />
        </div>
        <div class="sml-cnt4">
          <img src="img/cakeMain.png" alt="" />
        </div>
        <div class="sml-cnt5">
          <img src="img/cakeMain.png" alt="" />
        </div>
      </div>
      <div class="banner">
        <div class="banner-head">
          <h1>chocolate</h1>
          <p>
            At Cake Bliss, we bring your sweetest dreams to life with our
            handcrafted cakes. Perfect for every occasion, our cakes are made
            with love, premium ingredients, and customizable designs. Celebrate
            with us and make every moment unforgettable
          </p>
          <h2>goodness in every sllice</h2>
        </div>
        <div class="banner-img">
          <img
            class="banner-pic"
            src="img\Zebra Marble Layer Cake.jpeg"
            alt=""
          />
        </div>
      </div>
    </main>

    <div class="about-section">
      <div class="left-about">
        <img
          class="left-img"
          src="https://www.cravoury.com/wp-content/uploads/2024/01/Chocolate-Shaving-Cake-at-Cravoury-Cake-Shop-In-Bengaluru.png"
          alt=""
        />
      </div>
      <div class="right-about">
        <h1>About Us</h1>
        <p>
          Welcome to Cake Bliss, your one-stop destination for delightful,
          handcrafted cakes. We specialize in creating delicious, customizable
          treats for every occasion. From birthdays to weddings, our cakes are
          baked with love and premium ingredients. Explore our wide range of
          flavors and designs to add sweetness to your celebrations. Order now
          for doorstep delivery!
        </p>
        <button class="about-btn">Order Now</button>
      </div>
    </div>

    <div class="tell-us">
      <h1>Tell us Everything</h1>
      <p>
        Moments, big and small, but always special. A birthday, a farewell, a
        long-awaited reunion with all your loved ones — or just you and your cat
        celebrating the day you finally quit your job! If there’s a cause for
        celebration, we’re at your service. And if there isn’t, Amintiri can
        spark one — with the unadulterated pleasure of fine baking
      </p>
    </div>

    <div class="container">
      <div class="heading heading-center mb-3">
          <h1 class="title-lg">Sweet Menu</h1><!-- End .title -->

          <ul class="nav nav-pills justify-content-center" role="tablist">
              <li class="nav-item">
                  <a class="nav-link active" id="all-products" data-toggle="tab" href="#trendy-all-tab" role="tab" aria-controls="trendy-all-tab" aria-selected="true">All</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" id="latest" data-toggle="tab" href="#trendy-fur-tab" role="tab" aria-controls="trendy-fur-tab" aria-selected="false">Latest</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" id="trendy-decor-link" data-toggle="tab" href="#trendy-decor-tab" role="tab" aria-controls="trendy-decor-tab" aria-selected="false">Top Rated</a>
              </li>
          
          </ul>
      </div><!-- End .heading -->
  
      

     
      <div class="tab-content tab-content-carousel">
          <div class="tab-pane p-0 fade show active" id="trendy-all-tab" role="tabpanel" aria-labelledby="all-products">
              <div class="owl-carousel owl-simple carousel-equal-height carousel-with-shadow" data-toggle="owl" 
                  data-owl-options='{
                      "nav": false, 
                      "dots": true,
                      "margin": 20,
                      "loop": false,
                      "responsive": {
                          "0": {
                              "items":2
                          },
                          "480": {
                              "items":2
                          },
                          "768": {
                              "items":3
                          },
                          "992": {
                              "items":4
                          },
                          "1200": {
                              "items":4,
                              "nav": true,
                              "dots": false
                          }
                      }
                  }'>
                
                  <%allProducts.forEach((item)=>{%>
                  <div class="product product-11 text-center">
                      <figure class="product-media">
                        <% if (item.productOfferModel) { %>
                          <span class="offer-badge">Product Offer <%=item.offerPercentage%>%</span>
                          <% }else if(item. categoryOfferModel){%>
                            <span class="offer-badge">CategoryOffer <%=item.offerPercentage%>%</span>

                       <%} %>
                        <div class="col-6 col-md-4 col-lg-4">
                          <div class="product product-7 text-center">
                         
                            <!-- End .product-media -->
    
                         
                            <!-- End .product-body -->
                          </div>
                          <!-- End .product -->
                        </div>
                          <a href="/product/<%=item._id%>">
                              <img src="/uploads/<%=item.image[0]%>" alt="Product image" class="product-image">
                              <img src="/uploads/<%=item.image[1]%>" alt="Product image" class="product-image-hover">
                          </a>

                          <div class="product-action-vertical">
                            <a
                            href="#"
                            class="btn-product-icon btn-expandable wishlist-btn"
                            data-product-id="<%=item._id %>"
                          >
                            <% if(wishlist.includes(item._id.toString())) { %>
                              <i class="fa-solid fa-heart"></i>
                              <span> remove from wishlist</span>
                            <% } else { %>
                              <i class="fa-regular fa-heart"></i>
                              <span> add to wishlist</span>
                            <% } %>
                          </a><!-- End .product-action-vertical -->
<!-- End .product-action-vertical -->
                      </figure><!-- End .product-media -->

                      <div class="product-body">
                          <h3 class="product-title"><a href="product.html">Octo 4240</a></h3><!-- End .product-title -->
                          <div class="product-price">
                            <% if (item.productOfferModel) { %>
                              <span class="original-price">₹<%= item.varients[0].price %></span>
                              <span class="discounted-price">₹<%= item.varients[0].price -(item.varients[0].price*item.offerPercentage)/100%></span>
                            <% } else if(item.categoryOfferModel) { %>
                              <span class="original-price">₹<%= item.varients[0].price %></span>
                              <span class="discounted-price">₹<%= item.varients[0].price -(item.varients[0].price*item.offerPercentage)/100%></span>

                            <% }else{%>
                              <span>₹<%= item.varients[0].price %></span>
                                             
                          <%  } %>
                          </div>
                          
                          <div class="product-nav product-nav-dots">
                              <a href="#" class="active" style="background: #1f1e18;"><span class="sr-only">Color name</span></a>
                              <a href="#" style="background: #e8e8e8;"><span class="sr-only">Color name</span></a>
                          </div><!-- End .product-nav -->
                      </div><!-- End .product-body -->
                      <div class="product-action">
                          <a href="/product/<%=item._id%>" class="btn-product btn-cart"><span>View</span></a>
                      </div><!-- End .product-action -->
                  </div><!-- End .product -->

 <% })%>
              
               
               
              </div><!-- End .owl-carousel -->
          </div><!-- .End .tab-pane -->

         
          
          <div class="tab-pane p-0 fade" id="trendy-fur-tab" role="tabpanel" aria-labelledby="latest">
              <div class="owl-carousel owl-simple carousel-equal-height carousel-with-shadow" data-toggle="owl" 
                  data-owl-options='{
                      "nav": false, 
                      "dots": true,
                      "margin": 20,
                      "loop": false,
                      "responsive": {
                          "0": {
                              "items":2
                          },
                          "480": {
                              "items":2
                          },
                          "768": {
                              "items":3
                          },
                          "992": {
                              "items":4
                          },
                          "1200": {
                              "items":4,
                              "nav": true,
                              "dots": false
                          }
                      }
                  }'>
                 
                 
                  <% latestProducts.forEach((item)=>{%>
                  <div class="product product-11 text-center">
                      <figure class="product-media">
                        <figure class="product-media">
                          <% if (item.productOfferModel) { %>
                            <span class="offer-badge">Product Offer <%=item.offerPercentage%>%</span>
                            <% }else if(item. categoryOfferModel){%>
                              <span class="offer-badge">CategoryOffer <%=item.offerPercentage%>%</span>
  
                         <%} %>
                          <span class="product-label label-new">NEW</span>
                          <a href="/product/<%=item._id%>">
                              <img src="/uploads/<%=item.image[0]%>" alt="Product image" class="product-image">
                              <img src="/uploads/<%=item.image[1]%>" alt="Product image" class="product-image-hover">
                          </a>

                          <div class="product-action-vertical">
                            <a
                            href="#"
                            class="btn-product-icon btn-expandable wishlist-btn"
                            data-product-id="<%=item._id %>"
                          >
                            <% if(wishlist.includes(item._id.toString())) { %>
                              <i class="fa-solid fa-heart"></i>
                              <span> remove from wishlist</span>
                            <% } else { %>
                              <i class="fa-regular fa-heart"></i>
                              <span> add to wishlist</span>
                            <% } %>
                          </a><!-- End .product-action-vertical -->

                      </figure><!-- End .product-media -->

                      <div class="product-body">
                          <h3 class="product-title"><a href=""><%=item.productName%></a></h3><!-- End .product-title -->
                           <div class="product-price">
                            <% if (item.productOfferModel) { %>
                              <span class="original-price">₹<%= item.varients[0].price %></span>
                              <span class="discounted-price">₹<%= item.varients[0].price -(item.varients[0].price*item.offerPercentage)/100%></span>
                            <% } else if(item.categoryOfferModel) { %>
                              <span class="original-price">₹<%= item.varients[0].price %></span>
                              <span class="discounted-price">₹<%= item.varients[0].price -(item.varients[0].price*item.offerPercentage)/100%></span>

                            <% }else{%>
                              <span>₹<%= item.varients[0].price %></span>
                                             
                          <%  } %>
                          </div><!-- End .product-price -->
                      </div><!-- End .product-body -->
                      <div class="product-action">
                          <a href="/product/<%=item._id%>" class="btn-product btn-cart"><span>view </span></a>
                      </div><!-- End .product-action -->
                  </div><!-- End .product -->
                  <% })%>
                
              </div><!-- End .owl-carousel -->
          </div><!-- .End .tab-pane -->

          <% topRated .forEach((item)=>{%>

          <div class="tab-pane p-0 fade" id="trendy-decor-tab" role="tabpanel" aria-labelledby="trendy-decor-link">
              <div class="owl-carousel owl-simple carousel-equal-height carousel-with-shadow" data-toggle="owl" 
                  data-owl-options='{
                      "nav": false, 
                      "dots": true,
                      "margin": 20,
                      "loop": false,
                      "responsive": {
                          "0": {
                              "items":2
                          },
                          "480": {
                              "items":2
                          },
                          "768": {
                              "items":3
                          },
                          "992": {
                              "items":4
                          },
                          "1200": {
                              "items":4,
                              "nav": true,
                              "dots": false
                          }
                      }
                  }'>
                  <div class="product product-11 text-center">
                      <figure class="product-media">

                        <figure class="product-media">
                          <% if (item.productOfferModel) { %>
                            <span class="offer-badge">Product Offer <%=item.offerPercentage%>%</span>
                            <% }else if(item. categoryOfferModel){%>
                              <span class="offer-badge">CategoryOffer <%=item.offerPercentage%>%</span>
  
                         <%} %>
                          <a href="/product/<%=item._id%>">
                              <img src="/uploads/<%=item.image[0]%>" alt="Product image" class="product-image">
                              <img src="/uploads/<%=item.image[1]%>" alt="Product image" class="product-image-hover">
                          </a>

                          <div class="product-action-vertical">
                            <a
                            href="#"
                            class="btn-product-icon btn-expandable wishlist-btn"
                            data-product-id="<%=item._id %>"
                          >
                            <% if(wishlist.includes(item._id.toString())) { %>
                              <i class="fa-solid fa-heart"></i>
                              <span> remove from wishlist</span>
                            <% } else { %>
                              <i class="fa-regular fa-heart"></i>
                              <span> add to wishlist</span>
                            <% } %>
                          </a><!-- End .product-action-vertical -->
<!-- End .product-action-vertical -->
                      </figure><!-- End .product-media -->

                      <div class="product-body">
                        <h3 class="product-title"><a href=""><%=item.productName%></a></h3><!-- End .product-title -->
                         <div class="product-price">
                          <% if (item.productOfferModel) { %>
                            <span class="original-price">₹<%= item.varients[0].price %></span>
                            <span class="discounted-price">₹<%= item.varients[0].price -(item.varients[0].price*item.offerPercentage)/100%></span>
                          <% } else if(item.categoryOfferModel) { %>
                            <span class="original-price">₹<%= item.varients[0].price %></span>
                            <span class="discounted-price">₹<%= item.varients[0].price -(item.varients[0].price*item.offerPercentage)/100%></span>

                          <% }else{%>
                            <span>₹<%= item.varients[0].price %></span>
                                           
                        <%  } %>
                        </div><!-- End .product-price -->
                    </div>
                      <!-- End .product-body -->
                      <div class="product-action">
                          <a href="/product/<%=item._id%>" class="btn-product btn-cart"><span> View </span></a>
                      </div><!-- End .product-action -->
                  </div><!-- End .product -->
               
              </div><!-- End .owl-carousel -->
          </div><!-- .End .tab-pane -->
          <% })%>
         

      </div><!-- End .tab-content -->
  </div><!-- End .container -->


    <div class="contact">
      <div class="left-contact">
        <h1>We Bake It You Love It</h1>
        <p>
          Welcome to Cake Bliss, your one-stop destination for delightful,
          handcrafted cakes. We specialize in creating delicious, customizable
          treats for every occasion. From birthdays to weddings, our cakes are
          baked with love and premium ingredients. Explore our wide range of
          flavors and designs to add sweetness to your celebrations. Order now
          for doorstep delivery!
        </p>
        <button class="about-btn">Order Now</button>
      </div>
      <div class="right-contact">
        <div class="contact-container">
          <h1>Contact Us</h1>
          <input placeholder="  enter your email" type="email" />
          <button class="catact-btn">contact</button>
        </div>
      </div>
    </div>

   <!-- /////// -->
   <%- include('partials/footer.ejs') %>
  </body>

  <script src="card-assets/js/jquery.min.js"></script>
  <script src="card-assets/js/bootstrap.bundle.min.js"></script>
  <script src="card-assets/js/jquery.hoverIntent.min.js"></script>
  <script src="card-assets/js/jquery.waypoints.min.js"></script>
  <script src="card-assets/js/superfish.min.js"></script>
  <script src="card-assets/js/owl.carousel.min.js"></script>
  <script src="card-assets/js/jquery.plugin.min.js"></script>
  <script src="card-assets/js/jquery.magnific-popup.min.js"></script>
  <script src="card-assets/js/jquery.countdown.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script> 
  <!-- Main JS File -->
  <script src="card-assets/js/main.js"></script>
  <script src="card-assets/js/demos/demo-2.js"></script>
    
  <script>

const wishlistButtons = document.querySelectorAll('.wishlist-btn');
const showErrorToast = (message) => {
  toastr.options = {
    positionClass: "toast-top-center",
    timeOut: "3000",
    closeButton: true,
  };
  toastr.error(message);
};

const showSuccessToast = (message) => {
  toastr.options = {
    positionClass: "toast-top-center",
    timeOut: "3000",
    closeButton: true,
  };
  toastr.success(message);
};

wishlistButtons.forEach(button => {
  button.addEventListener('click', async (e) => {
    e.preventDefault();

    const productId = button.dataset.productId;
    const heartIcon = button.querySelector('i');
    const textSpan = button.querySelector('span');

    const isInWishlist = heartIcon.classList.contains('fa-solid');

    if (isInWishlist) {
      try {
        const response = await fetch('/wishlist-remove', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ productId })
        });

        if (response.ok) {
          heartIcon.classList.remove('fa-solid');
          heartIcon.classList.add('fa-regular');
          textSpan.textContent = ' add to wishlist';
          showErrorToast('Removed from wishlist');
        } else {
          showErrorToast('Could not remove from wishlist');
        }
      } catch (error) {
        console.log(error);
      }

    } else {
      try {
        const response = await fetch('/add-wishlist', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ productId })
        });

        if (response.ok) {
          heartIcon.classList.remove('fa-regular');
          heartIcon.classList.add('fa-solid');
          textSpan.textContent = ' remove from wishlist';
          showSuccessToast('Added to wishlist');
        } else {
          showErrorToast('Could not add to wishlist');
        }
      } catch (error) {
        console.log(error);
      }
    }
  });
});

  </script>
</html>
