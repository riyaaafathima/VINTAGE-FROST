<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Molla - Bootstrap eCommerce Template</title>
    <meta name="keywords" content="HTML5 Template" />
    <meta name="description" content="Molla - Bootstrap eCommerce Template" />
    <meta name="author" content="p-themes" />
    <!-- Favicon -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="card-assets/images/icons/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="card-assets/images/icons/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="card-assets/images/icons/favicon-16x16.png"
    />
    <link rel="manifest" href="card-assets/images/icons/site.html" />
    <link
      rel="mask-icon"
      href="card-assets/images/icons/safari-pinned-tab.svg"
      color="#666666"
    />
    <link rel="shortcut icon" href="card-assets/images/icons/favicon.ico" />
    <meta name="apple-mobile-web-app-title" content="Molla" />
    <meta name="application-name" content="Molla" />
    <meta name="msapplication-TileColor" content="#cc9966" />
    <meta
      name="msapplication-config"
      content="card-assets/images/icons/browserconfig.xml"
    />
    <meta name="theme-color" content="#ffffff" />
    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="card-assets/css/bootstrap.min.css" />
    <!-- ========================================== -->
    <link rel="stylesheet" href="/card-assets/css/style.css" />
    <link rel="stylesheet" href="card-assets/css/skins/skin-demo-2.css" />
    <link rel="stylesheet" href="card-assets/css/demos/demo-2.css" />
    <!-- Main CSS File -->
    <!-- <link rel="stylesheet" href="card-assets/css/style.css"> -->
    <link
      rel="stylesheet"
      href="card-assets/css/plugins/owl-carousel/owl.carousel.css"
    />
    <!-- <link rel="stylesheet" href="card-assets/css/plugins/magnific-popup/magnific-popup.css">
    <link rel="stylesheet" href="card-assets/css/plugins/nouislider/nouislider.css"> -->
    <link rel="stylesheet" href="css/allproduct.css" />
    <link rel="stylesheet" href="css/homepage.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <style>
      .dropdown {
        position: relative;
        display: inline-block;
      }

      .dropdown-menu {
        display: none; /* Hidden by default */
        position: absolute;
        background-color: white;
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
        padding: 10px;
        border-radius: 5px;
        z-index: 1;
      }

      .dropdown-menu a {
        color: black;
        text-decoration: none;
        display: block;
        margin: 5px 0;
      }

      .dropdown-menu a:hover {
        background-color: #f1f1f1;
        border-radius: 3px;
      }
    </style>
  </head>

  <body>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <div class="page-wrapper" style="min-height: 23%">
      <header>
        <div class="logo">
          <img
            class="logo-img"
            src="/img/63cf30fb2b1e35ba41fe6896f9a81807.jpg"
            alt=""
          />
          <h3>CAKE CHIEF</h3>
        </div>
        <div class="icons">
          <i class="fas fa-search"></i>
          <% if (user) { %>
            <i class="fas fa-heart"></i>
            <a href="/cart">
              <i class="fas fa-shopping-cart">

              </i>
            </a>
            
          <div class="dropdown">
            <i
              class="fas fa-person dropdown-toggle"
              onclick="toggleDropdown(event)"
            ></i>
            <div id="dropdownMenu" class="dropdown-menu">
              <a href="/user-profile">User Profile</a>
              <a id="logout" href="/logout">Logout</a>
            </div>
          </div>
          <% } else { %>
          <a href="/login">
            <i class="fas fa-sign-in-alt"> Login</i>
          </a>
          <% } %>
        </div>
      </header>

      <nav>
        <ul>
          <li><a href="/home-page">HOME</a></li>
          <li><a href="/all-products">SHOP</a></li>
          <li><a href="#">EXPRESS DELIVERY</a></li>
          <li><a href="#">CONTACT</a></li>
          <li><a href="#">ABOUT</a></li>
        </ul>
      </nav>

      <script>
        const logout_btn_el = document.querySelector("#logout");

        logout_btn_el.addEventListener("click", async (e) => {
          e.preventDefault(); // Prevent default action (redirecting)

          // Show the confirmation modal using SweetAlert2
          const result = await Swal.fire({
            title: "Are you sure?",
            text: "You won't be able to revert this!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Yes, logout!",
          });

          // If the user confirmed the action, redirect
          if (result.isConfirmed) {
            window.location.href = logout_btn_el.href; // Redirect to logout URL
          }
        });

        function toggleDropdown(event) {
          event.stopPropagation();
          const dropdownMenu = document.getElementById("dropdownMenu");
          dropdownMenu.style.display =
            dropdownMenu.style.display === "block" ? "none" : "block";
        }

        window.onclick = function (event) {
          if (!event.target.matches(".dropdown-toggle")) {
            const dropdowns = document.getElementsByClassName("dropdown-menu");
            for (let i = 0; i < dropdowns.length; i++) {
              dropdowns[i].style.display = "none";
            }
          }
        };
  
      </script>
    </div>
  </body>
</html>
